#o separador sempre será a vírgula. Essa decisão foi inspirada nos
#modelos fornecidos pela própria câmara, disponível em:
#http://www2.camara.leg.br/transparencia/recursos-humanos/remuneracao/relatorios-consolidados-por-ano-e-mes/esclarecimentos-consulta-remuneracao
#Read without 'factors': https://stackoverflow.com/questions/5187745/imported-a-csv-dataset-to-r-but-the-values-becomes-factors
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
###########################################################
#Adiciona coluna mes a todos os dados e concatena em uma só variável
###########################################################
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
###########################################################
#Quantos funcionários constam na folha de pagamento deste mês?
###########################################################
qntdServidores <- nrow(data)
###########################################################
#Quantos milhões/bilhões são pagos mensalmente em <...>?
###########################################################
sum(data$remuneracao_fixa)
sum(data$vantagens_pessoais)
sum(data$funcao_comissao)
sum(data$gratificacao_natalina)
sum(data$ferias)
sum(data$remuneracoes_eventuais)
sum(data$abono_permanencia)
sum(data$redutor_constitucional)
#previdencia
#imposto_renda
sum(data$remuneracao_apos_desconto)
sum(data$diarias)
sum(data$auxilios)
sum(data$vantagens_indenizatorias)
###########################################################
#Qual total mensal?                                       #
###########################################################
sum(data$remuneracao_fixa,data$vantagens_pessoais,data$funcao_comissao,data$gratificacao_natalina,data$ferias,data$remuneracoes_eventuais,data$abono_permanencia,data$redutor_constitucional,data$previdencia,data$imposto_renda,data$diarias,data$auxilios,data$vantagens_indenizatorias)
#Removido "Remuneração apos descontos"
###########################################################
#Quais são os top 10 salários em 2016 (no geral)          #
###########################################################
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao após desconto")
topSalarios
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
soTecnico <- filter(data, grepl("cnico Legislativo", cargo))
soSecretario <- filter(data, grepl("Secret", cargo))
soNaturezaEspecial <- filter(data, grepl("Cargo de Natureza Especial", cargo))
View(data)
soTecnico <- filter(data, grepl("T", cargo))
View(soTecnico)
View(data)
soSecretario <- filter(data, grepl("Secret", cargo))
soTecnico <- filter(data, !grepl('Analista|Cargo', cargo))
View(soTecnico)
soTecnico <- filter(data, !grepl('Analista|Cargo|Secret', cargo))
View(soSecretario)
View(soTecnico)
soTecnico <- filter(data, !grepl("Técnico", cargo))
View(soTecnico)
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
View(data)
soTecnico <- filter(data, !grepl("Técnico", cargo))
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
soTecnico <- filter(data, !grepl("Técnico", cargo))
View(soTecnico)
Técnico
soTecnico <- filter(data, !grepl("Técnico", cargo))
View(soTecnico)
View(data)
soTecnico <- filter(data, !grepl("cnico", cargo))
View(soTecnico)
soDeputado <- filter(data, grepl("Deputado", cargo))
View(soDeputado)
View(soDeputado)
analistas <- topSalariosFunction(soAnalista)
topSalariosFunction <- function(data)
{
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao")
return(topSalarios)
}
analistas <- topSalariosFunction(soAnalista)
View(analistas)
analistas <- topSalariosFunction(soAnalista)
tecnicos <- topSalariosFunction(soTecnico)
secretarios <- topSalariosFunction(soSecretario)
especiais <- topSalariosFunction(soNaturezaEspecial)
deputado <- topSalariosFunction(soDeputado)
View(especiais)
View(deputado)
#Autor: Ítalo de Pontes
#Os CSV's são gerados mensalmente, assim, para cada arquivo de dados, uma nova variável é atribuida
#Input in UTF-8 format
mesReferencia = "~/Dropbox/quebraquebra/camara/2015/RemuneracaoMensalServidores012015.csv"
#Por convensão, decidiu-se utilizar o formato de arquivo CSV, logo
#o separador sempre será a vírgula. Essa decisão foi inspirada nos
#modelos fornecidos pela própria câmara, disponível em:
#http://www2.camara.leg.br/transparencia/recursos-humanos/remuneracao/relatorios-consolidados-por-ano-e-mes/esclarecimentos-consulta-remuneracao
#Read without 'factors': https://stackoverflow.com/questions/5187745/imported-a-csv-dataset-to-r-but-the-values-becomes-factors
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
#dec="." <- testar isso
###########################################################
#Adiciona coluna mes a todos os dados e concatena em uma só variável
###########################################################
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
###########################################################
#Quantos funcionários constam na folha de pagamento deste mês?
###########################################################
qntdServidores <- nrow(data)
###########################################################
#Quantos milhões/bilhões são pagos mensalmente em <...>?
###########################################################
sum(data$remuneracao_fixa)
sum(data$vantagens_pessoais)
sum(data$funcao_comissao)
sum(data$gratificacao_natalina)
sum(data$ferias)
sum(data$remuneracoes_eventuais)
sum(data$abono_permanencia)
sum(data$redutor_constitucional)
#previdencia
#imposto_renda
sum(data$remuneracao_apos_desconto)
sum(data$diarias)
sum(data$auxilios)
sum(data$vantagens_indenizatorias)
###########################################################
#Qual total mensal?                                       #
###########################################################
sum(data$remuneracao_fixa,data$vantagens_pessoais,data$funcao_comissao,data$gratificacao_natalina,data$ferias,data$remuneracoes_eventuais,data$abono_permanencia,data$redutor_constitucional,data$previdencia,data$imposto_renda,data$diarias,data$auxilios,data$vantagens_indenizatorias)
#Removido "Remuneração apos descontos"
###########################################################
#Quais são os top 10 salários em 2016 (no geral)          #
###########################################################
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao após desconto")
topSalarios
library("dplyr")
topSalariosFunction <- function(data)
{
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao")
return(topSalarios)
}
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
soTecnico <- filter(data, !grepl("cnico", cargo))
soSecretario <- filter(data, grepl("Secret", cargo))
soNaturezaEspecial <- filter(data, grepl("Cargo de Natureza Especial", cargo))
soDeputado <- filter(data, grepl("Deputado", cargo))
View(soAnalista)
View(soDeputado)
View(soSecretario)
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
soTecnico <- filter(data, !grepl("cnico", cargo))
soSecretario <- filter(data, grepl("Secret", cargo))
soNaturezaEspecial <- filter(data, grepl("Cargo de Natureza Especial", cargo))
soDeputado <- filter(data, grepl("Deputado", cargo))
analistas <- topSalariosFunction(soAnalista)
tecnicos <- topSalariosFunction(soTecnico)
secretarios <- topSalariosFunction(soSecretario)
especiais <- topSalariosFunction(soNaturezaEspecial)
deputado <- topSalariosFunction(soDeputado)
View(tecnicos)
view(analistas)
viewer(analistas)
show(analistas)
show(analistas)
show(tecnicos)
soTecnico <- filter(data, !grepl("cnico", cargo))
tecnicos <- topSalariosFunction(soTecnico)
show(tecnicos)
View(soTecnico)
soTecnico <- filter(data, !grepl("cnico", cargo))
View(soTecnico)
View(soTecnico)
show(secretarios)
show(especiais)
show(deputado)
unique(data$cargo)
distinct(data$cargo)
summaryze(data$cargo)
summarize(data$cargo)
data$cargo
sapply(cargo, data)
sapply(data$cargo, data)
tecnicos <- topSalariosFunction(soTecnico)
View(tecnicos)
View(soTecnico)
soTecnico <- filter(data, !grepl("cnico Legislativo", cargo))
View(soTecnico)
soTecnico <- filter(data, grepl("cnico Legislativo", cargo))
View(soTecnico)
tecnicos <- topSalariosFunction(soTecnico)
show(tecnicos)
sum(soAnalista$remuneracao_apos_desconto)
sum(soTecnico$remuneracao_apos_desconto)
sum(soSecretario$remuneracao_apos_desconto)
sum(soNaturezaEspecial$remuneracao_apos_desconto)
sum(soDeputado$remuneracao_apos_desconto)
a1 <- sum(soAnalista$remuneracao_apos_desconto)
a2 <- sum(soTecnico$remuneracao_apos_desconto)
a3 <- sum(soSecretario$remuneracao_apos_desconto)
a4 <- sum(soNaturezaEspecial$remuneracao_apos_desconto)
a5 <- sum(soDeputado$remuneracao_apos_desconto)
a1+a2+a3+a4+a5
sum(data$remuneracao_apos_desconto)
outros <- filter(data, !grepl("Analista Legislativo|cnico Legislativo|Secret|Cargo de Naturea Especial|Deputado", cargo))
View(outros)
outros <- filter(data, !grepl("Analista Legislativo|cnico Legislativo|Secret|Cargo de Natureza Especial|Deputado", cargo))
View(outros)
show(outros)
outros <- topSalariosFunction(soOutros)
soOutros <- filter(data, !grepl("Analista Legislativo|cnico Legislativo|Secret|Cargo de Natureza Especial|Deputado", cargo))
outros <- topSalariosFunction(soOutros)
show(outros)
a1+a2+a3+a4+a5+a6
a6 <- sum(outros$remuneracao_apos_desconto)
a1+a2+a3+a4+a5+a6
sum(data$remuneracao_apos_desconto)
a1+a2+a3+a4+a5+a6sum(data$remuneracao_apos_desconto)
a1+a2+a3+a4+a5+a6-sum(data$remuneracao_apos_desconto)
sum(data$remuneracao_apos_desconto)/a1+a2+a3+a4+a5+a6
sum(data$remuneracao_apos_desconto)/(a1+a2+a3+a4+a5+a6)
(a1+a2+a3+a4+a5+a6)/sum(data$remuneracao_apos_desconto)
totalAnalista <- sum(soAnalista$remuneracao_apos_desconto)
totalTecnico <- sum(soTecnico$remuneracao_apos_desconto)
totalSecretario <- sum(soSecretario$remuneracao_apos_desconto)
totalNatureza <- sum(soNaturezaEspecial$remuneracao_apos_desconto)
totalDeputado <- sum(soDeputado$remuneracao_apos_desconto)
totalOutros <- sum(outros$remuneracao_apos_desconto)
somaObtida <- (totalAnalista+totalTecnico+totalSecretario+totalNatureza+totalDeputado+totalOutros)
somaReal <- sum(data$remuneracao_apos_desconto)
somaObtida-somaReal
somaReal-somaObtida
somaReal/somaObtida
somaObtida/somaReal
(somaObtida/somaReal)*100
View(data)
sapply(data$grupo_funcional, data)
soQuadroEfetivo <- filter(data, grepl("QUADRO EFETIVO - RJU", grupo_funcional))
soQuadroEfetivo <- filter(data, !grepl("QUADRO EFETIVO - RJU", grupo_funcional))
View(soQuadroEfetivo)
soQuadroEfetivo <- filter(data, !grepl("QUADRO EFETIVO - RJU|CARGO DE NATUREZA ESPECIAL", grupo_funcional))
View(soQuadroEfetivo)
soQuadroEfetivo <- filter(data, !grepl("QUADRO EFETIVO - RJU|CARGO DE NATUREZA ESPECIAL|INATIVO", grupo_funcional))
View(soQuadroEfetivo)
soQuadroEfetivo <- filter(data, !grepl("QUADRO EFETIVO - RJU|CARGO DE NATUREZA ESPECIAL|INATIVO|PARLARMENTAR", grupo_funcional))
soQuadroEfetivo <- filter(data, !grepl("QUADRO EFETIVO - RJU|CARGO DE NATUREZA ESPECIAL|INATIVO|PARLAMENTAR", grupo_funcional))
View(soQuadroEfetivo)
soQuadroEfetivo <- filter(data, !grepl("QUADRO EFETIVO - RJU|CARGO DE NATUREZA ESPECIAL|INATIVO|PARLAMENTAR|PENSÃO CIVIL", grupo_funcional))
soQuadroEfetivo <- filter(data, grepl("QUADRO EFETIVO - RJU", grupo_funcional))
soCargoNaturezaEspecial <- filter(data, grepl("CARGO DE NATUREZA ESPECIAL", grupo_funcional))
soInativo <- filter(data, grepl("INATIVO", grupo_funcional))
soParlamentar <- filter(data, grepl("PARLAMENTAR", grupo_funcional))
soPensaoCivil <- filter(data, grepl("PENSÃO CIVIL", grupo_funcional))
topQuadroEfetivo <- topSalariosFunction(soQuadroEfetivo)
show(topQuadroEfetivo)
show(topQuadroEfetivo)
show(topNaturezaEspecial)
topQuadroEfetivo <- topSalariosFunction(soQuadroEfetivo)
topNaturezaEspecial <- topSalariosFunction(soCargoNaturezaEspecial)
topInativo <- topSalariosFunction(soInativo)
topParlamentar <- topSalariosFunction(soParlamentar)
topPensaoCivil <- topSalariosFunction(soPensaoCivil)
show(topNaturezaEspecial)
show(topInativo)
show(topParlamentar)
show(topPensaoCivil)
totalCargosFuncionais <- (soQuadroEfetivo$remuneracao_apos_desconto+soCargoNaturezaEspecial$remuneracao_apos_desconto+soParlamentar$remuneracao_apos_desconto+soInativo$remuneracao_apos_desconto+soPensaoCivil$remuneracao_apos_desconto)
totalQuadroEfetivo <- sum(soQuadroEfetivo$remuneracao_apos_desconto)
totalCargoNatureza <- sum(soCargoNaturezaEspecial$remuneracao_apos_desconto)
totalParlamentar <- sum(soParlamentar$remuneracao_apos_desconto)
totalInativo <- sum(soInativo$remuneracao_apos_desconto)
totalPensao <- sum(soPensaoCivil$remuneracao_apos_desconto)
somaObtidaTodosCargos <- sum(totalQuadroEfetivo+totalCargoNatureza+totalParlamentar+totalInativo+totalPensao)
somaReal-somaObtidaTodosCargos
(somaObtidaTodosCargos/somaReal)*100
mesReferencia = "~/Dropbox/quebraquebra/camara/2015/RemuneracaoMensalServidores012015.csv"
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
qntdServidores <- nrow(data)
qntdServidores
mesReferencia = "~/Dropbox/quebraquebra/camara/2015/RemuneracaoMensalServidores022015.csv"
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
qntdServidores <- nrow(data)
qntdServidores
mesReferencia = "~/Dropbox/quebraquebra/camara/2015/RemuneracaoMensalServidores012015.csv"
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
qntdServidores <- nrow(data)
qntdServidores
sum(data$remuneracao_fixa)
sum(data$vantagens_pessoais)
sum(data$funcao_comissao)
sum(data$remuneracao_fixa,data$vantagens_pessoais,data$funcao_comissao,data$gratificacao_natalina,data$ferias,data$remuneracoes_eventuais,data$abono_permanencia,data$redutor_constitucional,data$previdencia,data$imposto_renda,data$diarias,data$auxilios,data$vantagens_indenizatorias)
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao após desconto")
topSalarios
library("dplyr")
topSalariosFunction <- function(data)
{
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao")
return(topSalarios)
}
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
soTecnico <- filter(data, grepl("cnico Legislativo", cargo))
soSecretario <- filter(data, grepl("Secret", cargo))
soNaturezaEspecial <- filter(data, grepl("Cargo de Natureza Especial", cargo))
soDeputado <- filter(data, grepl("Deputado", cargo))
soOutros <- filter(data, !grepl("Analista Legislativo|cnico Legislativo|Secret|Cargo de Natureza Especial|Deputado", cargo))
analistas <- topSalariosFunction(soAnalista)
tecnicos <- topSalariosFunction(soTecnico)
secretarios <- topSalariosFunction(soSecretario)
especiais <- topSalariosFunction(soNaturezaEspecial)
deputado <- topSalariosFunction(soDeputado)
outros <- topSalariosFunction(soOutros)
show(deputado)
totalAnalista <- sum(soAnalista$remuneracao_apos_desconto)
totalTecnico <- sum(soTecnico$remuneracao_apos_desconto)
totalSecretario <- sum(soSecretario$remuneracao_apos_desconto)
totalNatureza <- sum(soNaturezaEspecial$remuneracao_apos_desconto)
totalDeputado <- sum(soDeputado$remuneracao_apos_desconto)
totalOutros <- sum(outros$remuneracao_apos_desconto)
somaObtida <- (totalAnalista+totalTecnico+totalSecretario+totalNatureza+totalDeputado+totalOutros)
somaReal <- sum(data$remuneracao_apos_desconto)
somaReal-somaObtida
(somaObtida/somaReal)*100
soQuadroEfetivo <- filter(data, grepl("QUADRO EFETIVO - RJU", grupo_funcional))
soCargoNaturezaEspecial <- filter(data, grepl("CARGO DE NATUREZA ESPECIAL", grupo_funcional))
soInativo <- filter(data, grepl("INATIVO", grupo_funcional))
soParlamentar <- filter(data, grepl("PARLAMENTAR", grupo_funcional))
soPensaoCivil <- filter(data, grepl("PENSÃO CIVIL", grupo_funcional))
topQuadroEfetivo <- topSalariosFunction(soQuadroEfetivo)
topNaturezaEspecial <- topSalariosFunction(soCargoNaturezaEspecial)
topInativo <- topSalariosFunction(soInativo)
topParlamentar <- topSalariosFunction(soParlamentar)
topPensaoCivil <- topSalariosFunction(soPensaoCivil)
show(topInativo)
mesReferencia = "~/Dropbox/quebraquebra/camara/2015/RemuneracaoMensalServidores012015.csv"
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
library("dplyr")
topSalariosFunction <- function(data)
{
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao")
return(topSalarios)
}
}
#Filtra os funcionários de cada cargo
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
soTecnico <- filter(data, grepl("cnico Legislativo", cargo))
soSecretario <- filter(data, grepl("Secret", cargo))
soNaturezaEspecial <- filter(data, grepl("Cargo de Natureza Especial", cargo))
soDeputado <- filter(data, grepl("Deputado", cargo))
soOutros <- filter(data, !grepl("Analista Legislativo|cnico Legislativo|Secret|Cargo de Natureza Especial|Deputado", cargo))
#Retorna os top 10 salários de cada cargo
analistas <- topSalariosFunction(soAnalista)
tecnicos <- topSalariosFunction(soTecnico)
secretarios <- topSalariosFunction(soSecretario)
especiais <- topSalariosFunction(soNaturezaEspecial)
deputado <- topSalariosFunction(soDeputado)
outros <- topSalariosFunction(soOutros)
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
mesReferencia = "~/Dropbox/quebraquebra/camara/2015/RemuneracaoMensalServidores012015.csv"
data <- read.csv2(file=mesReferencia, sep=";", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", skip=1) #Skip o header
colnames(data) <-  c("cargo","grupo_funcional","folha_pagamento","ano_ingresso","remuneracao_fixa","vantagens_pessoais","funcao_comissao","gratificacao_natalina","ferias","remuneracoes_eventuais","abono_permanencia","redutor_constitucional","previdencia","imposto_renda","remuneracao_apos_desconto","diarias","auxilios","vantagens_indenizatorias")
library("dplyr")
install.packages("dplyr")
library("dplyr")
topSalariosFunction <- function(data)
{
salariosAgregados <- aggregate(remuneracao_apos_desconto~cargo, FUN=sum, data)
topSalarios <- salariosAgregados[order(salariosAgregados$remuneracao_apos_desconto, decreasing=TRUE)[1:10],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- c("Cargo", "Remuneracao")
return(topSalarios)
}
soAnalista <- filter(data, grepl("Analista Legislativo", cargo))
soTecnico <- filter(data, grepl("cnico Legislativo", cargo))
soSecretario <- filter(data, grepl("Secret", cargo))
soNaturezaEspecial <- filter(data, grepl("Cargo de Natureza Especial", cargo))
soDeputado <- filter(data, grepl("Deputado", cargo))
soOutros <- filter(data, !grepl("Analista Legislativo|cnico Legislativo|Secret|Cargo de Natureza Especial|Deputado", cargo))
analistas <- topSalariosFunction(soAnalista)
tecnicos <- topSalariosFunction(soTecnico)
secretarios <- topSalariosFunction(soSecretario)
especiais <- topSalariosFunction(soNaturezaEspecial)
deputado <- topSalariosFunction(soDeputado)
outros <- topSalariosFunction(soOutros)
show(analistas)
View(data)
show(tecnicos)
show(secretarios)
show(especiais)
show(deputado)
soQuadroEfetivo <- filter(data, grepl("QUADRO EFETIVO - RJU", grupo_funcional))
soCargoNaturezaEspecial <- filter(data, grepl("CARGO DE NATUREZA ESPECIAL", grupo_funcional))
soInativo <- filter(data, grepl("INATIVO", grupo_funcional))
soParlamentar <- filter(data, grepl("PARLAMENTAR", grupo_funcional))
soPensaoCivil <- filter(data, grepl("PENSÃO CIVIL", grupo_funcional))
#top 10 remuneracoes por grupo funcional
topQuadroEfetivo <- topSalariosFunction(soQuadroEfetivo)
topNaturezaEspecial <- topSalariosFunction(soCargoNaturezaEspecial)
topInativo <- topSalariosFunction(soInativo)
topParlamentar <- topSalariosFunction(soParlamentar)
topPensaoCivil <- topSalariosFunction(soPensaoCivil)
#Mostra as top 10 remuneracoes em diferentes grupos funcionais
show(topQuadroEfetivo)
show(topInativo)
show(topParlamentar)
show(topPensaoCivil)
library(dplyr)
library(devtools)
library(DT)
library(flexdashboard)
library(knitr)
library(ggplot2)
library(rCharts)
library(reshape2)
require(scales)
library(shiny)
library(plotly)
data_filename = "dados_senado.csv"
data <- read.csv2(file=data_filename, sep=",", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", dec=".", encoding = "UTF-8")
data_filename = "dados_senado.ctxt"
data <- read.csv2(file=data_filename, sep=",", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", dec=".", encoding = "UTF-8")
colnames(data) <-  c("mes","ano","cargo","vinculo","nome","remuneracao_fixa","vantagens_pessoais","remuneracao_eventual","abono_permanencia","descontos","outros_diarias","outros_auxilios","outros_vantagens")
data_filename = "dados_senado.txt"
data <- read.csv2(file=data_filename, sep=",", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", dec=".", encoding = "UTF-8")
data_filename = "camara_dados.txt"
data <- read.csv2(file=data_filename, sep=",", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", dec=".", encoding = "UTF-8")
data <- read.csv2(file=data_filename, sep=",", header=FALSE, stringsAsFactors=FALSE, na.strings="unknown", dec=".", encoding = "UTF-8")
colnames(data) <-  c("mes","ano","cargo","vinculo","nome","remuneracao_fixa","vantagens_pessoais","remuneracao_eventual","abono_permanencia","descontos","outros_diarias","outros_auxilios","outros_vantagens")
View(data)
data <- mutate(data, remuneracao_total=remuneracao_fixa+vantagens_pessoais+remuneracao_eventual+abono_permanencia-descontos+outros_diarias+outros_auxilios+outros_vantagens)
ano_max <- max(data$ano)
ano_min <- min(data$ano)
View(data)
options(scipen=999, OutDec= ",")
camara_recente <- data[data$ano==ano_max,]
remuneracao_total_liquida <- sum(data$remuneracao_total, na.rm=T)
topSalarios <- function(salariosAgregados, column_ref, keeps, size) {
topSalarios <- salariosAgregados[order(column_ref, decreasing=TRUE)[1:size],]
rownames(topSalarios) <- NULL
colnames(topSalarios) <- keeps
return(topSalarios)
}
keeps <- c("Nome","Cargo","Vnculo","Mês","Ano","Remuneraço Total (R$)")
salariosAgregados <- aggregate(remuneracao_total~nome+cargo+vinculo+mes+ano, FUN=sum, data)
top_servidores <- topSalarios(salariosAgregados, salariosAgregados$licenca_premio_s, keeps, 10)
top_servidores_todos <- topSalarios(salariosAgregados, salariosAgregados$remuneracao_total, keeps, 10)
View(top_servidores_todos)
gasto_de_referencia <- sum(top_servidores_todos$remuneracao_total)
todos_deputados <- data[data$cargo=="DEPUTADO",]
View(todos_deputados)
data[data$cargo=="DEPUTADO",]
data[cargo=="DEPUTADO",]
data[data$cargo=="DEPUTADO"]
todos_deputados <- data[data$cargo=="DEPUTADO"]
todos_deputados <- data[,data$cargo=="DEPUTADO"]
todos_deputados <- data[data$cargo=="DEPUTADO",]
todos_deputados <- data[data$cargo=='DEPUTADO',]
todos_deputados
todos_deputados <- data[data$cargo=="DEPUTADO",]
todos_deputados
todos_deputados <- filter(data, grepl("DEPUTADO", cargo))
todos_deputados
todos_deputados_recentes <- todos_deputados[todos_deputados$ano==ano_max,]
salariosAgregados <- aggregate(remuneracao_total~nome+cargo+vinculo+mes+ano, FUN=sum, todos_deputados)
top_deputados_todos <- topSalarios(salariosAgregados, salariosAgregados$remuneracao_total, keeps, 10)
salariosAgregados <- aggregate(remuneracao_total~nome+cargo+vinculo+mes+ano, FUN=sum, todos_deputados_recentes)
top_deputados_recente <- topSalarios(salariosAgregados, salariosAgregados$remuneracao_total, keeps, 10)
View(top_deputados_recente)
View(top_deputados_todos)
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>33000,]
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>33000,]
deputados_acima_teto_recente <- todos_deputados[todos_deputados_recente$remuneracao_total>33000,]
todos_deputados_recente <- todos_deputados[todos_deputados$ano==ano_max,]
deputados_acima_teto_recente <- todos_deputados[todos_deputados_recente$remuneracao_total>33000,]
View(deputados_acima_teto_recente)
View(deputados_acima_teto_recente)
View(deputados_acima_teto)
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>33000.00,]
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>3300000,]
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>330000,]
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>33000,]
View(deputados_acima_teto)
deputados_acima_teto_recente <- todos_deputados[todos_deputados_recente$remuneracao_total>33000,]
View(deputados_acima_teto_recente)
deputados_acima_teto_recente <- todos_deputados_recente[todos_deputados_recente$remuneracao_total>33000,]
View(deputados_acima_teto_recente)
summarise(data)
summarise(data$cargo)
summarise(data$remuneracao_total)
deputados_acima_teto <- todos_deputados[todos_deputados$remuneracao_total>37476.93,]
deputados_acima_teto_recente <- todos_deputados_recente[todos_deputados_recente$remuneracao_total>37476.93,]
View(deputados_acima_teto_recente)
